<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-signals/core-signals.html">
<link rel="import" href="../../bower_components/paper-input/paper-input-decorator.html">
<link rel="import" href="../../bower_components/paper-input/paper-autogrow-textarea.html">

<polymer-element name="gang-textarea">
    <template>
        <link rel="stylesheet" href="gang-textarea.css">

        <paper-input-decorator floatingLabel label="Your message">

            <paper-autogrow-textarea id='wrapper' on-keypress="{{newMessage}}">

                <div id="textdiv">
                    <textarea id='textarea' value='{{message}}'></textarea>
                </div>

            </paper-autogrow-textarea>
        </paper-input-decorator>
    </template>
    <script>
    (function() {

        Polymer({

            message: '',

            newMessage: function(e) {

                if (e.which == 13 && this.message != '') {

                    this.fire('core-signal', {
                        name: "new-message",
                        data: {
                            text: this.message
                        }
                    });
                    this.message = '';
                    this.$.textarea.value = '';
                    this.$.wrapper.update();

                }

            }
        });

    })();
    </script>
</polymer-element>
